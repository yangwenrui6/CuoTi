# é”™é¢˜æœ¬é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ å®Œæ•´ç›®å½•æ ‘

```
mistake_book/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ src/                               # æºä»£ç ï¼ˆé¿å…é¡¶å±‚æ±¡æŸ“ï¼‰
â”‚   â””â”€â”€ mistake_book/                  # ä¸»åº”ç”¨åŒ…ï¼ˆå¯importï¼‰
â”‚       â”œâ”€â”€ __init__.py                # åŒ…åˆå§‹åŒ–ï¼Œç‰ˆæœ¬ä¿¡æ¯
â”‚       â”œâ”€â”€ __main__.py                # æ”¯æŒ python -m mistake_book å¯åŠ¨
â”‚       â”œâ”€â”€ main.py                    # QApplicationå…¥å£ + å¼‚å¸¸å…¨å±€æ•è·
â”‚       â”œâ”€â”€ exceptions.py              # è‡ªå®šä¹‰å¼‚å¸¸ï¼ˆDataError, OCRFailedç­‰ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ config/                    # é…ç½®ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ settings.py            # åŠ¨æ€é…ç½®ï¼ˆè·¯å¾„/ä¸»é¢˜/ç®—æ³•å‚æ•°ï¼‰
â”‚       â”‚   â”œâ”€â”€ constants.py           # æšä¸¾/å¸¸é‡ï¼ˆæŒæ¡åº¦ç­‰çº§ã€é”™è¯¯ç±»å‹ï¼‰
â”‚       â”‚   â””â”€â”€ paths.py               # è·¨å¹³å°è·¯å¾„ç”Ÿæˆï¼ˆç”¨platformdirsï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ core/                      # ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒï¼ˆæ— GUIä¾èµ–ï¼ï¼‰
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ review_scheduler.py    # é—´éš”é‡å¤ç®—æ³•(SM-2) + å¤ä¹ è®¡åˆ’ç”Ÿæˆ
â”‚       â”‚   â”œâ”€â”€ data_manager.py        # ä¸šåŠ¡å±‚ï¼šå°è£…å¢åˆ æ”¹æŸ¥+ç»Ÿè®¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ export_handler.py      # å¯¼å‡ºPDF/Excelé€»è¾‘
â”‚       â”‚   â””â”€â”€ import_parser.py       # CSV/å›¾ç‰‡æ‰¹é‡å¯¼å…¥è§£æ
â”‚       â”‚
â”‚       â”œâ”€â”€ database/                  # æ•°æ®æŒä¹…å±‚
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ models.py              # SQLAlchemy ORMæ¨¡å‹ï¼ˆQuestion/Tagç­‰ï¼‰
â”‚       â”‚   â”œâ”€â”€ db_manager.py          # è¿æ¥æ± ã€äº‹åŠ¡ã€åˆå§‹åŒ–ã€å¤‡ä»½
â”‚       â”‚   â””â”€â”€ migrations/            # ï¼ˆå¯é€‰ï¼‰Alembicè¿ç§»è„šæœ¬
â”‚       â”‚
â”‚       â”œâ”€â”€ services/                  # å¤–éƒ¨èƒ½åŠ›å°è£… + ä¸šåŠ¡æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ question_service.py    # é”™é¢˜ä¸šåŠ¡æœåŠ¡ï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥çœ‹è¯¦æƒ…ï¼‰
â”‚       â”‚   â”œâ”€â”€ review_service.py      # å¤ä¹ ä¸šåŠ¡æœåŠ¡ï¼ˆè·å–å¾…å¤ä¹ ã€å¤„ç†ç»“æœã€ç»Ÿè®¡ï¼‰
â”‚       â”‚   â”œâ”€â”€ ui_service.py          # UIä¸šåŠ¡æœåŠ¡ï¼ˆæœç´¢ã€ç­›é€‰ã€å¯¼èˆªã€ç»Ÿè®¡ï¼‰
â”‚       â”‚   â”œâ”€â”€ ocr_engine.py          # OCRæ¥å£ï¼ˆPaddleOCR/Tesseracté€‚é…å™¨ï¼‰
â”‚       â”‚   â”œâ”€â”€ notification.py        # ç³»ç»Ÿé€šçŸ¥ï¼ˆå¤ä¹ æé†’ï¼‰
â”‚       â”‚   â””â”€â”€ cloud_sync.py          # äº‘åŒæ­¥æŠ½è±¡ï¼ˆé¢„ç•™æ¥å£ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ ui/                        # ç•Œé¢å±‚ï¼ˆä¸¥æ ¼éµå¾ªMVVMï¼‰
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ main_window.py         # ä¸»çª—å£Controller
â”‚       â”‚   â”œâ”€â”€ viewmodels/            # ViewModelå±‚ï¼ˆæ•°æ®ç»‘å®šæ ¸å¿ƒï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”‚   â”œâ”€â”€ question_vm.py     # é”™é¢˜è§†å›¾æ¨¡å‹
â”‚       â”‚   â”‚   â””â”€â”€ review_vm.py       # å¤ä¹ è§†å›¾æ¨¡å‹
â”‚       â”‚   â”œâ”€â”€ widgets/               # è‡ªå®šä¹‰æ§ä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”‚   â”œâ”€â”€ question_card.py   # é”™é¢˜å¡ç‰‡ç»„ä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ tag_selector.py    # æ ‡ç­¾é€‰æ‹©å™¨
â”‚       â”‚   â”‚   â””â”€â”€ difficulty_slider.py # éš¾åº¦æ»‘å—
â”‚       â”‚   â”œâ”€â”€ dialogs/               # å¯¹è¯æ¡†
â”‚       â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”‚   â”œâ”€â”€ add_dialog.py      # æ·»åŠ é”™é¢˜å¯¹è¯æ¡†ï¼ˆæ”¯æŒæ‹–æ‹½å’Œç‚¹å‡»ä¸Šä¼ ï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ review_dialog.py   # å¤ä¹ å¯¹è¯æ¡†
â”‚       â”‚   â”‚   â”œâ”€â”€ detail_dialog.py   # æŸ¥çœ‹é”™é¢˜è¯¦æƒ…å¯¹è¯æ¡†
â”‚       â”‚   â”‚   â””â”€â”€ image_viewer.py    # å›¾ç‰‡æŸ¥çœ‹å™¨å¯¹è¯æ¡†ï¼ˆæŸ¥çœ‹å®Œæ•´å›¾ç‰‡ï¼‰
â”‚       â”‚   â””â”€â”€ resources/             # ç¼–è¯‘åèµ„æºï¼ˆç”±è„šæœ¬ç”Ÿæˆï¼‰
â”‚       â”‚       â”œâ”€â”€ __init__.py
â”‚       â”‚       â”œâ”€â”€ resources_rc.py    # pyrcc6ç¼–è¯‘çš„.qrc
â”‚       â”‚       â””â”€â”€ ui_compiled/       # pyuic6ç¼–è¯‘çš„.ui â†’ .py
â”‚       â”‚
â”‚       â””â”€â”€ utils/                     # é€šç”¨å·¥å…·
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ helpers.py             # æ—¥æœŸæ ¼å¼åŒ–/è·¯å¾„å®‰å…¨ç­‰
â”‚           â”œâ”€â”€ validators.py          # è¡¨å•éªŒè¯
â”‚           â”œâ”€â”€ logger.py              # ç»Ÿä¸€æ—¥å¿—é…ç½®ï¼ˆæ–‡ä»¶+æ§åˆ¶å°ï¼‰
â”‚           â””â”€â”€ image_processor.py     # æˆªå›¾å‹ç¼©/OCRé¢„å¤„ç†
â”‚
â”œâ”€â”€ resources/                         # åŸå§‹èµ„æºï¼ˆå¼€å‘æ—¶ï¼‰
â”‚   â”œâ”€â”€ ui/                            # .uiæ–‡ä»¶ï¼ˆQt Designerè®¾è®¡ï¼‰
â”‚   â”‚   â”œâ”€â”€ main_window.ui             # ä¸»çª—å£UIè®¾è®¡
â”‚   â”‚   â”œâ”€â”€ add_question_dialog.ui     # æ·»åŠ é”™é¢˜å¯¹è¯æ¡†UI
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ images/                        # åŸå§‹å›¾ç‰‡/å›¾æ ‡
â”‚   â”œâ”€â”€ styles/                        # QSSæ ·å¼è¡¨ï¼ˆæ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜ï¼‰
â”‚   â”‚   â”œâ”€â”€ light.qss                  # äº®è‰²ä¸»é¢˜
â”‚   â”‚   â””â”€â”€ dark.qss                   # æš—è‰²ä¸»é¢˜
â”‚   â””â”€â”€ app.qrc                        # Qtèµ„æºæ¸…å•ï¼ˆå¼•ç”¨images/ï¼‰
â”‚

â”œâ”€â”€ scripts/                           # è¾…åŠ©è„šæœ¬
â”‚   â”œâ”€â”€ compile_resources.py           # ä¸€é”®ç¼–è¯‘.ui/.qrc â†’ resources/
â”‚   â”œâ”€â”€ build_exe.py                   # PyInstalleræ‰“åŒ…é…ç½®
â”‚   â”œâ”€â”€ check_ocr_status.py            # OCRçŠ¶æ€è¯Šæ–­å·¥å…·
â”‚   â””â”€â”€ migrate_v1_to_v2.py            # æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆç‰ˆæœ¬å‡çº§ç”¨ï¼‰
â”‚
â”œâ”€â”€ docs/                              # æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                      # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ architecture.md                # æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ backend_services.md            # åç«¯æœåŠ¡æ¶æ„
â”‚   â”œâ”€â”€ database_design.md             # æ•°æ®åº“è®¾è®¡
â”‚   â”œâ”€â”€ gui_design.md                  # GUIç•Œé¢è®¾è®¡
â”‚   â”œâ”€â”€ integration.md                 # å‰åç«¯é›†æˆè¯´æ˜
â”‚   â”œâ”€â”€ refactoring_services.md        # æœåŠ¡å±‚é‡æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ ui_optimization.md             # UIå±‚ä¼˜åŒ–é‡æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ core_layer_analysis.md         # Coreå±‚ä½¿ç”¨æƒ…å†µåˆ†æ
â”‚   â”œâ”€â”€ data_flow_fix.md               # æ•°æ®æµä¿®å¤æ–‡æ¡£
â”‚   â”œâ”€â”€ ui_refresh_fix.md              # UIåˆ·æ–°é—®é¢˜ä¿®å¤æ–‡æ¡£
â”‚   â”œâ”€â”€ database_cache_fix.md          # æ•°æ®åº“ç¼“å­˜é—®é¢˜ä¿®å¤æ–‡æ¡£
â”‚   â”œâ”€â”€ view_detail_feature.md         # æŸ¥çœ‹é”™é¢˜è¯¦æƒ…åŠŸèƒ½æ–‡æ¡£
â”‚   â”œâ”€â”€ delete_question_feature.md     # åˆ é™¤é”™é¢˜åŠŸèƒ½æ–‡æ¡£
â”‚   â”œâ”€â”€ card_click_interaction.md      # å¡ç‰‡ç‚¹å‡»äº¤äº’ä¼˜åŒ–
â”‚   â”œâ”€â”€ view_state_persistence.md      # è§†å›¾çŠ¶æ€æŒä¹…åŒ–
â”‚   â”œâ”€â”€ navigation_selection_persistence.md # å¯¼èˆªæ ‘é€‰ä¸­çŠ¶æ€æŒä¹…åŒ–
â”‚   â”œâ”€â”€ prevent_duplicate_save.md      # é˜²æ­¢é‡å¤ä¿å­˜
â”‚   â”œâ”€â”€ ocr_implementation.md          # OCRåŠŸèƒ½å®Œæ•´å®ç°
â”‚   â”œâ”€â”€ ocr_simplification.md          # OCRå¼•æ“ç®€åŒ–è¯´æ˜
â”‚   â”œâ”€â”€ easyocr_pyqt6_fix.md           # EasyOCRä¸PyQt6å†²çªä¿®å¤
â”‚   â”œâ”€â”€ easyocr_dll_fix.md             # EasyOCR DLLé”™è¯¯ä¿®å¤
â”‚   â”œâ”€â”€ chinese_path_fix.md            # ä¸­æ–‡è·¯å¾„OCRè¯†åˆ«ä¿®å¤
â”‚   â”œâ”€â”€ auto_ocr_on_drop.md            # æ‹–æ‹½å›¾ç‰‡è‡ªåŠ¨OCRè¯†åˆ«
â”‚   â”œâ”€â”€ image_upload_and_preview.md    # å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½
â”‚   â”œâ”€â”€ image_loading_fix.md           # å›¾ç‰‡åŠ è½½ä¸­æ–‡è·¯å¾„ä¿®å¤
â”‚   â”œâ”€â”€ ocr_lazy_loading.md            # OCRå»¶è¿ŸåŠ è½½ä¼˜åŒ–
â”‚   â”œâ”€â”€ move_models_to_other_drive.md  # æ¨¡å‹è·¯å¾„é…ç½®åˆ°å…¶ä»–ç›˜ç¬¦
â”‚   â”œâ”€â”€ ocr_async_loading.md           # OCRå¼‚æ­¥åŠ è½½ä¼˜åŒ–
â”‚   â”œâ”€â”€ ocr_status_notification.md     # OCRçŠ¶æ€é€šçŸ¥ä¼˜åŒ–
â”‚   â”œâ”€â”€ ocr_model_path_fix.md          # OCRæ¨¡å‹è·¯å¾„ä¿®å¤
â”‚   â”œâ”€â”€ ocr_recognition_fix.md         # OCRè¯†åˆ«æµç¨‹ä¿®å¤
â”‚   â”œâ”€â”€ ocr_quick_start.md             # OCRåŠŸèƒ½å¿«é€Ÿå…¥é—¨
â”‚   â”œâ”€â”€ ocr_status_and_solutions.md    # OCRçŠ¶æ€è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ OCRä½¿ç”¨æŒ‡å—.md                 # OCRä½¿ç”¨å¿«é€ŸæŒ‡å—
â”‚   â”œâ”€â”€ OCRåŠŸèƒ½æ€»ç»“.md                 # OCRåŠŸèƒ½å®Œæ•´æ€»ç»“
â”‚   â”œâ”€â”€ ç§»åŠ¨æ¨¡å‹åˆ°Dç›˜è¯´æ˜.md           # ç§»åŠ¨æ¨¡å‹åˆ°Dç›˜æ“ä½œè¯´æ˜
â”‚   â”œâ”€â”€ tesseract_installation_guide.md # Tesseractå®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ user_manual.md                 # ç”¨æˆ·æŒ‡å—
â”‚   â””â”€â”€ dev_setup.md                   # å¼€å‘ç¯å¢ƒæ­å»º
â”‚
â”œâ”€â”€ dependencies/                      # ä¾èµ–é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ README.md                     # ä¾èµ–è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ requirements.txt              # åŸºç¡€ä¾èµ–ï¼ˆpyqt6, sqlalchemy...ï¼‰
â”‚   â”œâ”€â”€ requirements-dev.txt          # å¼€å‘ä¾èµ–ï¼ˆblack, flake8...ï¼‰
â”‚   â””â”€â”€ pyproject.toml                # é¡¹ç›®æ„å»ºé…ç½®
â”‚
â”œâ”€â”€ tests/                            # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ test_services/                # æœåŠ¡å±‚æµ‹è¯•ï¼ˆOCRç›¸å…³ï¼‰
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_ocr_simple.py        # OCRåŸºç¡€åŠŸèƒ½æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_ocr_complete.py      # OCRå®Œæ•´æµç¨‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_ocr_thread.py        # OCRåå°çº¿ç¨‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_config_check.py      # OCRé…ç½®æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ ...                       # å…¶ä»–æœåŠ¡æµ‹è¯•
â”‚   â”œâ”€â”€ test_ui/                      # UIå±‚æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ test_add_dialog.py        # æ·»åŠ é”™é¢˜å¯¹è¯æ¡†æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_image_loading.py     # å›¾ç‰‡åŠ è½½æµ‹è¯•
â”‚   â”œâ”€â”€ test_core/                    # æ ¸å¿ƒå±‚æµ‹è¯•
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_database/                # æ•°æ®åº“å±‚æµ‹è¯•
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_utils/                   # å·¥å…·å±‚æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ test_chinese_path.py      # ä¸­æ–‡è·¯å¾„æµ‹è¯•
â”‚   â”œâ”€â”€ test_full_integration.py      # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ README.md                     # æµ‹è¯•è¯´æ˜æ–‡æ¡£
â”‚
â”œâ”€â”€ .gitignore                         # å¿½ç•¥__pycache__/build/ç”¨æˆ·æ•°æ®ç­‰
â”œâ”€â”€ README.md                          # é¡¹ç›®è¯´æ˜
â””â”€â”€ LICENSE                            # MITè®¸å¯è¯
```

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. config/ - é…ç½®ç®¡ç†
- **settings.py**: åŠ¨æ€é…ç½®ï¼ˆä¸»é¢˜ã€æ•°æ®åº“è·¯å¾„ã€ç®—æ³•å‚æ•°ç­‰ï¼‰
- **constants.py**: æšä¸¾å¸¸é‡ï¼ˆæŒæ¡åº¦ç­‰çº§ã€é¢˜å‹ã€å¤ä¹ ç»“æœï¼‰
- **paths.py**: è·¨å¹³å°è·¯å¾„ç®¡ç†ï¼ˆä½¿ç”¨platformdirsï¼‰

### 2. core/ - ä¸šåŠ¡é€»è¾‘æ ¸å¿ƒ
> âš ï¸ é‡è¦ï¼šæ­¤å±‚å®Œå…¨ç‹¬ç«‹äºGUIï¼Œå¯å•ç‹¬æµ‹è¯•

- **review_scheduler.py**: SM-2é—´éš”é‡å¤ç®—æ³•å®ç°
- **data_manager.py**: ä¸šåŠ¡å±‚æ•°æ®ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ã€ç»Ÿè®¡ï¼‰
- **export_handler.py**: å¯¼å‡ºPDF/ExcelåŠŸèƒ½
- **import_parser.py**: CSV/å›¾ç‰‡æ‰¹é‡å¯¼å…¥

### 3. database/ - æ•°æ®æŒä¹…å±‚
- **models.py**: SQLAlchemy ORMæ¨¡å‹å®šä¹‰
  - Questionï¼ˆé”™é¢˜ï¼‰
  - Tagï¼ˆæ ‡ç­¾ï¼‰
  - ReviewRecordï¼ˆå¤ä¹ è®°å½•ï¼‰
- **db_manager.py**: æ•°æ®åº“è¿æ¥æ± ã€äº‹åŠ¡ç®¡ç†ã€å¤‡ä»½æ¢å¤

### 4. services/ - å¤–éƒ¨æœåŠ¡å°è£… + ä¸šåŠ¡æœåŠ¡å±‚
> ğŸ’¡ æœåŠ¡å±‚å°è£…ä¸šåŠ¡é€»è¾‘ï¼ŒUIå±‚é€šè¿‡æœåŠ¡å±‚ä¸æ ¸å¿ƒå±‚äº¤äº’

- **question_service.py**: é”™é¢˜ä¸šåŠ¡æœåŠ¡
  - create_question(): åˆ›å»ºé”™é¢˜
  - update_question(): æ›´æ–°é”™é¢˜
  - delete_question(): åˆ é™¤é”™é¢˜ï¼ˆå¸¦ç¡®è®¤ï¼‰
  - get_question_detail(): è·å–é”™é¢˜è¯¦æƒ…
  - recognize_image(): OCRå›¾ç‰‡è¯†åˆ«
- **review_service.py**: å¤ä¹ ä¸šåŠ¡æœåŠ¡
  - get_due_questions(): è·å–å¾…å¤ä¹ é”™é¢˜
  - process_review_result(): å¤„ç†å¤ä¹ ç»“æœ
  - get_review_statistics(): è·å–å¤ä¹ ç»Ÿè®¡
- **ui_service.py**: UIä¸šåŠ¡æœåŠ¡
  - get_all_questions(): è·å–æ‰€æœ‰é”™é¢˜
  - search_questions(): æœç´¢é”™é¢˜ï¼ˆå¤šå­—æ®µï¼‰
  - filter_questions(): ç­›é€‰é”™é¢˜ï¼ˆå¤šæ¡ä»¶ï¼‰
  - get_navigation_data(): è·å–å¯¼èˆªæ ‘æ•°æ®
  - get_filter_options(): è·å–ç­›é€‰å™¨é€‰é¡¹
  - parse_filter_from_ui(): è§£æUIç­›é€‰æ¡ä»¶
  - get_statistics_summary(): è·å–ç»Ÿè®¡æ‘˜è¦
- **ocr_engine.py**: OCRå¼•æ“é€‚é…å™¨ï¼ˆPaddleOCR/Tesseractï¼‰
- **notification.py**: ç³»ç»Ÿé€šçŸ¥æœåŠ¡
- **cloud_sync.py**: äº‘åŒæ­¥æ¥å£ï¼ˆé¢„ç•™ï¼‰

### 5. ui/ - ç•Œé¢å±‚ï¼ˆMVVMæ¶æ„ï¼‰
- **main_window.py**: ä¸»çª—å£æ§åˆ¶å™¨
- **viewmodels/**: ViewModelå±‚ï¼ˆæ•°æ®ç»‘å®šï¼‰
  - question_vm.py: é”™é¢˜åˆ—è¡¨è§†å›¾æ¨¡å‹
  - review_vm.py: å¤ä¹ æµç¨‹è§†å›¾æ¨¡å‹
- **widgets/**: è‡ªå®šä¹‰æ§ä»¶
  - question_card.py: é”™é¢˜å¡ç‰‡ï¼ˆå¸¦æŸ¥çœ‹å’Œåˆ é™¤æŒ‰é’®ï¼‰
  - tag_selector.py: æ ‡ç­¾é€‰æ‹©å™¨
  - difficulty_slider.py: éš¾åº¦æ»‘å—
- **dialogs/**: å¯¹è¯æ¡†
  - add_dialog.py: æ·»åŠ é”™é¢˜ï¼ˆè°ƒç”¨QuestionServiceï¼‰
  - review_dialog.py: å¤ä¹ ç•Œé¢ï¼ˆè°ƒç”¨ReviewServiceï¼‰
  - detail_dialog.py: æŸ¥çœ‹é”™é¢˜è¯¦æƒ…ï¼ˆåªè¯»å±•ç¤ºï¼‰

### 6. utils/ - é€šç”¨å·¥å…·
- **logger.py**: ç»Ÿä¸€æ—¥å¿—é…ç½®
- **helpers.py**: æ—¥æœŸæ ¼å¼åŒ–ã€è·¯å¾„å®‰å…¨ç­‰
- **validators.py**: è¡¨å•éªŒè¯
- **image_processor.py**: å›¾ç‰‡å‹ç¼©ã€OCRé¢„å¤„ç†

## ğŸ“¦ ä¾èµ–ç®¡ç† (dependencies/)

### requirements.txt - åŸºç¡€ä¾èµ–
è¿è¡Œåº”ç”¨æ‰€éœ€çš„æœ€å°ä¾èµ–åŒ…ï¼š
- **PyQt6**: GUIæ¡†æ¶
- **SQLAlchemy**: æ•°æ®åº“ORM
- **platformdirs**: è·¨å¹³å°è·¯å¾„ç®¡ç†
- **Pillow**: å›¾ç‰‡å¤„ç†
- **plyer**: ç³»ç»Ÿé€šçŸ¥

### requirements-dev.txt - å¼€å‘ä¾èµ–
å¼€å‘å’Œæ‰“åŒ…æ‰€éœ€çš„å·¥å…·ï¼š
- **black**: ä»£ç æ ¼å¼åŒ–
- **flake8**: ä»£ç æ£€æŸ¥
- **mypy**: ç±»å‹æ£€æŸ¥
- **PyInstaller**: åº”ç”¨æ‰“åŒ…

### pyproject.toml - é¡¹ç›®é…ç½®
ç°ä»£åŒ–çš„Pythoné¡¹ç›®é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«ï¼š
- é¡¹ç›®å…ƒæ•°æ®
- ä¾èµ–å£°æ˜
- æ„å»ºç³»ç»Ÿé…ç½®
- å·¥å…·é…ç½®

è¯¦è§ [dependencies/README.md](../dependencies/README.md)

## ğŸ“š æ–‡æ¡£ç³»ç»Ÿ (docs/)

æ‰€æœ‰é¡¹ç›®æ–‡æ¡£é›†ä¸­åœ¨ `docs/` ç›®å½•ï¼š

- **README.md**: æ–‡æ¡£ç´¢å¼•å’Œå¯¼èˆª
- **architecture.md**: æ•´ä½“æ¶æ„è®¾è®¡è¯´æ˜
- **backend_services.md**: åç«¯æœåŠ¡æ¶æ„è¯¦è§£
- **database_design.md**: æ•°æ®åº“è¡¨ç»“æ„å’ŒERå›¾
- **gui_design.md**: GUIç•Œé¢è®¾è®¡è§„èŒƒ
- **integration.md**: å‰åç«¯é›†æˆæµç¨‹
- **refactoring_services.md**: æœåŠ¡å±‚é‡æ„è®°å½•
- **view_detail_feature.md**: æŸ¥çœ‹é”™é¢˜è¯¦æƒ…åŠŸèƒ½
- **delete_question_feature.md**: åˆ é™¤é”™é¢˜åŠŸèƒ½
- **ui_optimization.md**: UIå±‚ä¸šåŠ¡é€»è¾‘ä¼˜åŒ–
- **data_flow_fix.md**: æ•°æ®æµä¿®å¤è®°å½•
- **ui_refresh_fix.md**: UIåˆ·æ–°é—®é¢˜ä¿®å¤
- **database_cache_fix.md**: æ•°æ®åº“ç¼“å­˜é—®é¢˜ä¿®å¤
- **card_click_interaction.md**: å¡ç‰‡ç‚¹å‡»äº¤äº’ä¼˜åŒ–
- **view_state_persistence.md**: è§†å›¾çŠ¶æ€æŒä¹…åŒ–
- **navigation_selection_persistence.md**: å¯¼èˆªæ ‘é€‰ä¸­çŠ¶æ€æŒä¹…åŒ–
- **prevent_duplicate_save.md**: é˜²æ­¢é‡å¤ä¿å­˜
- **ocr_implementation.md**: OCRåŠŸèƒ½å®Œæ•´å®ç°
- **ocr_simplification.md**: OCRå¼•æ“ç®€åŒ–è¯´æ˜
- **easyocr_pyqt6_fix.md**: EasyOCRä¸PyQt6 DLLå†²çªä¿®å¤
- **easyocr_dll_fix.md**: EasyOCR DLLé”™è¯¯ä¿®å¤
- **chinese_path_fix.md**: ä¸­æ–‡è·¯å¾„OCRè¯†åˆ«ä¿®å¤
- **auto_ocr_on_drop.md**: æ‹–æ‹½å›¾ç‰‡è‡ªåŠ¨OCRè¯†åˆ«
- **image_upload_and_preview.md**: å›¾ç‰‡ä¸Šä¼ å’Œé¢„è§ˆåŠŸèƒ½
- **image_loading_fix.md**: å›¾ç‰‡åŠ è½½ä¸­æ–‡è·¯å¾„ä¿®å¤
- **ocr_lazy_loading.md**: OCRå»¶è¿ŸåŠ è½½ä¼˜åŒ–
- **move_models_to_other_drive.md**: æ¨¡å‹è·¯å¾„é…ç½®åˆ°å…¶ä»–ç›˜ç¬¦
- **ocr_async_loading.md**: OCRå¼‚æ­¥åŠ è½½ä¼˜åŒ–
- **ocr_status_notification.md**: OCRçŠ¶æ€é€šçŸ¥ä¼˜åŒ–
- **ocr_model_path_fix.md**: OCRæ¨¡å‹è·¯å¾„ä¿®å¤
- **ocr_recognition_fix.md**: OCRè¯†åˆ«æµç¨‹ä¿®å¤
- **ocr_quick_start.md**: OCRåŠŸèƒ½å¿«é€Ÿå…¥é—¨
- **ocr_status_and_solutions.md**: OCRçŠ¶æ€è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ
- **OCRä½¿ç”¨æŒ‡å—.md**: OCRä½¿ç”¨å¿«é€ŸæŒ‡å—ï¼ˆä¸­æ–‡ï¼‰
- **OCRåŠŸèƒ½æ€»ç»“.md**: OCRåŠŸèƒ½å®Œæ•´æ€»ç»“ï¼ˆä¸­æ–‡ï¼‰
- **ç§»åŠ¨æ¨¡å‹åˆ°Dç›˜è¯´æ˜.md**: ç§»åŠ¨æ¨¡å‹åˆ°Dç›˜æ“ä½œè¯´æ˜ï¼ˆä¸­æ–‡ï¼‰
- **tesseract_installation_guide.md**: Tesseractå®‰è£…æŒ‡å—
- **core_layer_analysis.md**: Coreå±‚ä½¿ç”¨åˆ†æ
- **dev_setup.md**: å¼€å‘ç¯å¢ƒæ­å»ºæŒ‡å—
- **user_manual.md**: ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œ

## ğŸ¯ è®¾è®¡åŸåˆ™

### åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      UI Layer (PyQt6)           â”‚  ç•Œé¢å±‚ï¼ˆDialogs/Widgetsï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ViewModel Layer (MVVM)        â”‚  è§†å›¾æ¨¡å‹å±‚ï¼ˆæ•°æ®ç»‘å®šï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Service Layer                 â”‚  æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å°è£…ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Core Business Logic           â”‚  æ ¸å¿ƒä¸šåŠ¡å±‚ï¼ˆç®—æ³•/æ•°æ®ç®¡ç†ï¼‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Database Layer (SQLAlchemy)   â”‚  æ•°æ®æŒä¹…å±‚ï¼ˆORMæ¨¡å‹ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµå‘
```
UI Dialog â†’ Service â†’ Core/DataManager â†’ Database
    â†“          â†“           â†“                â†“
 ç”¨æˆ·äº¤äº’   ä¸šåŠ¡å°è£…    ä¸šåŠ¡é€»è¾‘         æ•°æ®æŒä¹…åŒ–
```

### å…³é”®ç‰¹æ€§
1. **ä¸šåŠ¡é€»è¾‘ä¸UIåˆ†ç¦»**: core/ç›®å½•å®Œå…¨ç‹¬ç«‹ï¼Œå¯å•ç‹¬æµ‹è¯•
2. **æœåŠ¡å±‚å°è£…**: UIé€šè¿‡Serviceå±‚è®¿é—®ä¸šåŠ¡é€»è¾‘ï¼Œé™ä½è€¦åˆ
3. **MVVMæ¨¡å¼**: ViewModelè´Ÿè´£æ•°æ®ç»‘å®šï¼ŒViewåªè´Ÿè´£æ˜¾ç¤º
4. **ä¾èµ–æ³¨å…¥**: é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–ï¼Œä¾¿äºæµ‹è¯•å’Œç»´æŠ¤
5. **æ¥å£æŠ½è±¡**: OCRã€äº‘åŒæ­¥ç­‰ä½¿ç”¨æŠ½è±¡åŸºç±»ï¼Œæ˜“äºæ‰©å±•

### æœ€ä½³å®è·µ
- âœ… UIå±‚åªè´Ÿè´£å±•ç¤ºå’Œç”¨æˆ·äº¤äº’ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
- âœ… ä¸šåŠ¡é€»è¾‘æ”¾åœ¨Serviceå±‚æˆ–Coreå±‚
- âœ… ä½¿ç”¨ä¾èµ–æ³¨å…¥ä¼ é€’æœåŠ¡å®ä¾‹
- âœ… å¼‚å¸¸å¤„ç†åœ¨Serviceå±‚ç»Ÿä¸€å¤„ç†
- âœ… æ•°æ®éªŒè¯åœ¨Serviceå±‚å®Œæˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
pip install -r dependencies/requirements.txt
```

### è¿è¡Œåº”ç”¨
```bash
python -m mistake_book
```

### å¼€å‘æ¨¡å¼
```bash
# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•
pytest tests/

# ç¼–è¯‘èµ„æº
python scripts/compile_resources.py

# æ‰“åŒ…åº”ç”¨
python scripts/build_exe.py
```

## ğŸ“ æ•°æ®åº“æ¨¡å‹

### Questionï¼ˆé”™é¢˜ï¼‰
- åŸºæœ¬ä¿¡æ¯ï¼šå­¦ç§‘ã€é¢˜å‹ã€å†…å®¹ã€ç­”æ¡ˆ
- å¤ä¹ æ•°æ®ï¼šæŒæ¡åº¦ã€éš¾åº¦å› å­ã€ä¸‹æ¬¡å¤ä¹ æ—¶é—´
- å…³è”ï¼šæ ‡ç­¾ï¼ˆå¤šå¯¹å¤šï¼‰ã€å¤ä¹ è®°å½•ï¼ˆä¸€å¯¹å¤šï¼‰

### Tagï¼ˆæ ‡ç­¾ï¼‰
- åç§°ã€é¢œè‰²
- å…³è”ï¼šé”™é¢˜ï¼ˆå¤šå¯¹å¤šï¼‰

### ReviewRecordï¼ˆå¤ä¹ è®°å½•ï¼‰
- å¤ä¹ æ—¶é—´ã€ç»“æœã€è€—æ—¶
- å…³è”ï¼šé”™é¢˜ï¼ˆå¤šå¯¹ä¸€ï¼‰

## ğŸ”§ æŠ€æœ¯æ ˆ

- **GUIæ¡†æ¶**: PyQt6
- **æ•°æ®åº“**: SQLite + SQLAlchemy ORM
- **å¤ä¹ ç®—æ³•**: SM-2é—´éš”é‡å¤ç®—æ³•
- **è·¯å¾„ç®¡ç†**: platformdirsï¼ˆè·¨å¹³å°ï¼‰
- **OCRå¼•æ“**: PaddleOCR / Tesseractï¼ˆå¯é€‰ï¼‰
- **æµ‹è¯•æ¡†æ¶**: pytest
- **æ‰“åŒ…å·¥å…·**: PyInstaller

## ğŸ“„ è®¸å¯è¯

MIT License
