# 更新日志 (Changelog)

本文档记录错题本项目的版本更新历史。

---

## [v1.5.0] - 2026-02-04

### 🎨 UI优化

#### 详情对话框改进
- **UI优化**: 提升可读性，优化颜色对比度和字体大小
  - 题目内容：14pt字体，白色背景，深灰色文字
  - 正确答案：13pt加粗，绿色背景，深绿色文字
  - 我的答案：13pt，红色背景，深红色文字
  - 解析：12pt，黄色背景，深橙色文字
- **编辑功能**: 支持直接编辑题目、答案、解析
  - 退出时提示保存修改
  - 通过PyQt信号通知主窗口
- **长文本滚动**: 设置最大高度，超出部分自动滚动
  - 题目内容：最大250px
  - 答案区域：最大200px

#### 主页面卡片优化
- **固定高度**: 所有卡片统一180px高度，视觉整齐
- **字体提升**: 科目13pt，题型12pt，题目摘要12pt
- **颜色优化**: 提高对比度，改善可读性
- **内容截断**: 题目超过100字自动截断，标签最多显示3个

### 🔄 复习功能重构

#### 模块选择器
- **新增对话框**: ReviewModuleSelectorDialog
- **双列布局**: 左侧科目列表（蓝色），右侧题型列表（绿色）
- **实时统计**: 显示每个模块的题目数量
- **灵活选择**: 支持选择特定模块或全部复习
- **视觉优化**: 清晰的配色方案，移除焦点内框

#### 新复习对话框
- **卡片式设计**: 简洁美观的题目展示
- **答案折叠**: 初始隐藏答案，点击显示
- **掌握度评估**: 🔴生疏/🟡困难/🟢掌握/🔵熟练
- **自动流转**: 选择掌握度后自动进入下一题
- **复习总结**: 完成后显示统计信息
- **中途退出**: 支持随时结束，提示确认

### 📚 文档完善

#### 项目结构
- **更新PROJECT_STRUCTURE.md**: 完整的目录树和模块说明
- **文档分类**: 按功能分类整理所有文档
- **最新特性**: 添加最新功能特性章节

#### 新增文档
- `detail_dialog_ui_improvement.md` - 详情对话框UI优化
- `editable_answer_in_detail.md` - 答案编辑功能
- `main_page_card_ui_improvement.md` - 主页面卡片优化
- `card_fixed_height.md` - 卡片固定高度
- `review_refactoring.md` - 复习功能重构总览
- `review_module_selector.md` - 模块选择器实现
- `review_module_selector_fix.md` - 模块选择器修复
- `recent_updates_summary.md` - 最近更新总结

#### 文档索引更新
- 更新`docs/README.md`，添加最新文档链接
- 按类别组织文档（架构、功能、OCR、测试等）
- 添加快速导航指南

### 🔧 技术改进

#### 代码组织
- 删除旧的ReviewDialog，使用新的模块化设计
- 优化信号机制，改善组件通信
- 完善异常处理和用户提示

#### 用户体验
- 所有UI操作在主线程执行，确保线程安全
- 改善视觉反馈，提高操作流畅度
- 优化长文本显示，支持滚动浏览

### 📝 影响的文件

#### 新增文件
- `src/mistake_book/ui/dialogs/review_module_selector.py`
- `src/mistake_book/ui/dialogs/review_dialog_new.py`
- `docs/detail_dialog_ui_improvement.md`
- `docs/editable_answer_in_detail.md`
- `docs/main_page_card_ui_improvement.md`
- `docs/card_fixed_height.md`
- `docs/review_refactoring.md`
- `docs/review_module_selector.md`
- `docs/review_module_selector_fix.md`
- `docs/recent_updates_summary.md`
- `CHANGELOG.md`

#### 修改文件
- `src/mistake_book/ui/dialogs/detail_dialog.py`
- `src/mistake_book/ui/widgets/question_card.py`
- `src/mistake_book/ui/main_window.py`
- `src/mistake_book/ui/dialogs/__init__.py`
- `PROJECT_STRUCTURE.md`
- `docs/README.md`

---

## [v1.4.0] - 2026-02-04 (之前)

### 🖼️ OCR功能完善

#### 核心功能
- **EasyOCR集成**: 支持中英文混合识别
- **异步加载**: 后台初始化，不阻塞UI启动
- **自定义路径**: 支持配置模型存储路径（D:/EasyOCR）
- **拖拽识别**: 拖拽图片自动OCR识别

#### 问题修复
- 修复EasyOCR与PyQt6 DLL冲突
- 修复中文路径OCR识别问题
- 修复图片加载中文路径问题
- 优化OCR模型路径配置
- 改善OCR识别流程和状态管理

#### 性能优化
- 延迟加载：启动速度提升10倍
- 异步加载：UI保持响应
- 状态通知：实时显示加载进度

### 📸 图片处理

- **上传功能**: 点击上传图片
- **预览显示**: 缩略图预览
- **查看器**: 查看完整图片
- **中文路径**: 完美支持中文路径

### 📊 错题管理

- **查看详情**: 查看错题完整信息
- **删除功能**: 删除错题（带确认）
- **卡片交互**: 点击卡片查看详情
- **状态持久化**: 记住视图状态和导航选择
- **防重复保存**: 避免重复保存操作

### 🏗️ 架构优化

- **服务层重构**: 清晰的服务层设计
- **UI层优化**: 业务逻辑从UI层分离
- **数据流修复**: 优化数据流向
- **缓存问题修复**: 解决数据库缓存问题

### 📚 文档体系

- 创建完整文档体系
- 架构、数据库、GUI设计文档
- OCR功能文档（中英文）
- 问题修复记录文档
- 用户手册和开发指南

---

## [v1.3.0] - 2024-01 (更早)

### 基础功能
- 错题录入和管理
- 标签系统
- 难度评估
- 基础复习功能
- SQLite数据库

### 界面设计
- 三栏布局（导航、筛选、内容）
- 错题卡片展示
- 添加错题对话框
- 基础主题支持

---

## 版本说明

### 版本号规则
- **主版本号**: 重大架构变更或功能重构
- **次版本号**: 新功能添加或重要优化
- **修订号**: Bug修复和小改进

### 标签说明
- 🎨 UI/UX改进
- 🔄 功能重构
- 🖼️ 图片/OCR相关
- 📚 文档更新
- 🔧 技术改进
- 🐛 Bug修复
- ⚡ 性能优化
- 🔒 安全改进

---

## 后续计划

### v1.6.0 (计划中)
- [ ] 复习算法优化（SM-2参数调优）
- [ ] 导出功能完善（PDF、Excel）
- [ ] 批量导入功能
- [ ] 快捷键支持

### v1.7.0 (计划中)
- [ ] 主题切换（亮色/暗色）
- [ ] 自定义配色方案
- [ ] 更多统计图表
- [ ] 云同步功能

### v2.0.0 (远期)
- [ ] 移动端支持
- [ ] 多用户系统
- [ ] 协作功能
- [ ] AI辅助功能

---

**维护者**: 开发团队  
**最后更新**: 2026年2月4日
