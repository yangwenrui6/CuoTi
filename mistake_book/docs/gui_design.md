# GUI界面设计文档

## 📐 整体布局

### 主窗口 - 三栏布局

```
┌─────────────────────────────────────────────────────────────────┐
│  工具栏: [➕添加] [📚复习] [📤导出] [🔍+] [🔍-] [🎨高对比度]      │
├──────────┬────────────────────────────────┬─────────────────────┤
│          │                                │                     │
│  左栏    │         中栏                   │      右栏           │
│  导航树  │      错题卡片流                │   筛选 + 统计       │
│          │                                │                     │
│ 📂数学   │  ┌──────────────────────┐     │  🔧 筛选            │
│ 📂物理   │  │ 🔴 [数学] 单选题 ⭐⭐⭐│     │  科目: [全部▼]     │
│ 📂化学   │  │ 题目摘要...          │     │  难度: [全部▼]     │
│ 🏷️标签   │  │ 🏷️代数 🏷️函数      │     │  掌握度: [全部▼]   │
│ 📊掌握度 │  └──────────────────────┘     │                     │
│  🔴生疏  │                                │  📊 统计            │
│  🟡学习中│  ┌──────────────────────┐     │  总题数: 120       │
│  🟢掌握  │  │ 🟢 [物理] 计算题 ⭐⭐ │     │  已掌握: 45        │
│  🔵熟练  │  │ 题目摘要...          │     │  学习中: 60        │
│          │  └──────────────────────┘     │  待复习: 15        │
│          │                                │                     │
└──────────┴────────────────────────────────┴─────────────────────┘
│  状态栏: 就绪                                                    │
└─────────────────────────────────────────────────────────────────┘
```

**尺寸比例**: 左(250px) : 中(700px) : 右(250px) = 1:3:1

---

## 🎨 主界面组件详解

### 1. 左栏 - 导航树 (250px)

**功能**: 分类浏览和快速筛选

**结构**:
```
📂 分类导航
├─ 数学
├─ 物理
├─ 化学
├─ 英语
├─ 语文
├─ 🏷️ 标签
│  ├─ 代数
│  ├─ 几何
│  └─ ...
└─ 📊 掌握度
   ├─ 🔴 生疏
   ├─ 🟡 学习中
   ├─ 🟢 掌握
   └─ 🔵 熟练
```

**交互**:
- 点击节点 → 中栏显示对应错题
- 支持展开/折叠
- 高亮当前选中项

---

### 2. 中栏 - 错题卡片流 (700px)

**功能**: 展示错题列表，支持搜索

**顶部搜索框**:
```
┌─────────────────────────────────────┐
│ 🔍 搜索错题...                      │
└─────────────────────────────────────┘
```

**卡片设计**:
```
┌─┬──────────────────────────────────────┬──────────┐
│█│ 📚 数学 • 单选题              ⭐⭐⭐  │ 🔴 生疏  │
│█│ 求函数 f(x)=x²+2x+1 的最小值...     │ 已复习3次│
│█│ 🏷️ 代数 🏷️ 函数                    │          │
└─┴──────────────────────────────────────┴──────────┘
 ↑
色标（根据掌握度变色）
```

**色标颜色映射**:
- 🔴 红色 (#e74c3c): 生疏 (mastery_level = 0)
- 🟡 橙色 (#f39c12): 学习中 (mastery_level = 1)
- 🟢 绿色 (#27ae60): 掌握 (mastery_level = 2)
- 🔵 蓝色 (#3498db): 熟练 (mastery_level = 3)

**交互**:
- 鼠标悬停 → 边框高亮
- 点击卡片 → 显示详情对话框
- 支持滚动加载

---

### 3. 右栏 - 筛选与统计 (250px)

**筛选面板**:
```
┌─────────────────────┐
│ 🔧 筛选             │
├─────────────────────┤
│ 科目: [全部 ▼]     │
│ 难度: [全部 ▼]     │
│ 掌握度: [全部 ▼]   │
└─────────────────────┘
```

**统计面板**:
```
┌─────────────────────┐
│ 📊 统计             │
├─────────────────────┤
│ 总题数: 120         │
│ 已掌握: 45          │
│ 学习中: 60          │
│ 待复习: 15          │
└─────────────────────┘
```

---

## ➕ 添加错题对话框

### 布局设计 (800x700)

```
┌──────────────────────────────────────────────────────┐
│  ➕ 添加错题                                    [×]  │
├──────────────────────────────────────────────────────┤
│  📷 图片上传                                         │
│  ┌────────────────────────────────────────────────┐ │
│  │                                                │ │
│  │     📸 拖拽图片到此处                          │ │
│  │     或点击粘贴截图 (Ctrl+V)                    │ │
│  │                                                │ │
│  └────────────────────────────────────────────────┘ │
│                                    [🔍 OCR识别]     │
├──────────────────────────────────────────────────────┤
│  📝 题目信息                                         │
│  科目: [数学 ▼]          题型: [单选题 ▼]          │
│                                                      │
│  题目内容:                                           │
│  ┌────────────────────────────────────────────────┐ │
│  │                                                │ │
│  └────────────────────────────────────────────────┘ │
│                                                      │
│  我的答案:                                           │
│  ┌────────────────────────────────────────────────┐ │
│  └────────────────────────────────────────────────┘ │
│                                                      │
│  正确答案:                                           │
│  ┌────────────────────────────────────────────────┐ │
│  └────────────────────────────────────────────────┘ │
│                                                      │
│  解析:                                               │
│  ┌────────────────────────────────────────────────┐ │
│  └────────────────────────────────────────────────┘ │
│                                                      │
│  难度: [3星 ⭐⭐⭐ ▼]                                │
│                                                      │
│  标签: [🔍 搜索或添加标签...]                       │
│  已选标签: 无                                        │
│                                                      │
│                              [取消]  [💾 保存]      │
└──────────────────────────────────────────────────────┘
```

### 核心功能

1. **拖拽区域**
   - 支持拖拽图片文件
   - 支持 Ctrl+V 粘贴截图
   - 显示图片预览（缩放至400x300）

2. **OCR识别**
   - 点击按钮触发识别
   - 自动填充到"题目内容"
   - 显示识别进度

3. **标签选择器**
   - 搜索框支持模糊匹配
   - 输入新标签自动创建
   - 显示已选标签列表

---

## 📚 复习模式 - 全屏卡片式

### 布局设计 (全屏)

```
┌─────────────────────────────────────────────────────────────────┐
│  进度: 3 / 15                                    [❌ 退出 (ESC)] │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📚 数学  📝 单选题                              ⭐⭐⭐          │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │                                                            │ │
│  │  求函数 f(x) = x² + 2x + 1 的最小值是多少？               │ │
│  │                                                            │ │
│  │  A. -1                                                     │ │
│  │  B. 0                                                      │ │
│  │  C. 1                                                      │ │
│  │  D. 2                                                      │ │
│  │                                                            │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ ❌ 我的答案:                                               │ │
│  │ B. 0                                                       │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ ✅ 正确答案:                                               │ │
│  │ A. -1                                                      │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ 💡 解析:                                                   │ │
│  │ 配方法: f(x) = (x+1)² - 1，最小值为 -1                    │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│                    [👁️ 显示解析]                                │
│                                                                  │
├─────────────────────────────────────────────────────────────────┤
│  [🔴 生疏 (1)]  [🟡 困难 (2)]  [🟢 掌握 (3)]  [🔵 熟练 (4)]   │
└─────────────────────────────────────────────────────────────────┘
```

### 交互流程

1. **初始状态**
   - 只显示题目内容
   - 答案区域折叠隐藏
   - "显示解析"按钮可见

2. **点击"显示解析"**
   - 展开答案区域
   - 显示：我的答案（红色背景）
   - 显示：正确答案（绿色背景）
   - 显示：解析（黄色背景）
   - 按钮文字变为"隐藏解析"

3. **点击底部按钮**
   - 触发SM-2算法更新
   - 自动跳转下一题
   - 更新进度条

4. **完成所有题目**
   - 显示完成界面
   - 统计本次复习数据
   - 提供关闭按钮

### 键盘快捷键

- `ESC`: 退出复习模式
- `1`: 生疏
- `2`: 困难
- `3`: 掌握
- `4`: 熟练
- `Space`: 显示/隐藏解析

---

## ♿ 无障碍设计

### 1. 高对比度模式

**切换方式**: 工具栏 → 🎨 高对比度

**效果**:
- 背景: 纯黑 (#000)
- 文字: 纯白 (#FFF)
- 按钮: 白底黑字，2px白色边框
- 所有控件边框加粗

### 2. 字体缩放

**快捷键**:
- `Ctrl + +`: 放大字体
- `Ctrl + -`: 缩小字体

**范围**: 0.5x ~ 2.0x，步进0.1

### 3. 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + N` | 添加错题 |
| `Ctrl + R` | 开始复习 |
| `Ctrl + E` | 导出 |
| `Ctrl + +` | 放大字体 |
| `Ctrl + -` | 缩小字体 |
| `Ctrl + V` | 粘贴截图（添加对话框） |
| `ESC` | 退出复习模式 |
| `1-4` | 复习结果快捷键 |

### 4. 屏幕阅读器支持

- 所有按钮设置 `accessibleName`
- 图标按钮添加文字说明
- 表单控件关联标签

---

## 🎨 配色方案

### 主色调
- 主色: #3498db (蓝色)
- 成功: #27ae60 (绿色)
- 警告: #f39c12 (橙色)
- 错误: #e74c3c (红色)

### 中性色
- 深色文字: #2c3e50
- 浅色文字: #7f8c8d
- 背景: #f5f6fa
- 边框: #dcdde1

### 掌握度色标
- 生疏: #e74c3c (红)
- 学习中: #f39c12 (橙)
- 掌握: #27ae60 (绿)
- 熟练: #3498db (蓝)

---

## 📱 响应式设计

### 最小窗口尺寸
- 宽度: 1200px
- 高度: 800px

### 分割器可调整
- 用户可拖动分割器调整三栏宽度
- 保存用户偏好设置

---

## 🔄 动画效果

1. **卡片悬停**: 边框颜色渐变 (200ms)
2. **按钮点击**: 背景色加深 (100ms)
3. **答案展开**: 高度动画 (300ms)
4. **页面切换**: 淡入淡出 (250ms)

---

## 📐 组件尺寸规范

| 组件 | 尺寸 |
|------|------|
| 按钮高度 | 36px |
| 输入框高度 | 36px |
| 卡片内边距 | 15px |
| 圆角半径 | 6-10px |
| 图标大小 | 24x24px |
| 字体大小 | 10-16pt |

---

## 🚀 性能优化

1. **虚拟滚动**: 卡片流超过50个时启用
2. **图片懒加载**: 卡片图片按需加载
3. **防抖搜索**: 搜索输入延迟300ms
4. **缓存策略**: 缓存已加载的题目数据
